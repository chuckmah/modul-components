<div class="m-upload">
    <div class="m-upload__file-input" v-if="fileInput">
        <input type="file" id="files" name="files[]" :accept="extensionsProp" @change="filesInput" :multiple="multiple" />
    </div>

    <div class="m-upload__drag-drop"
         :class="{'drag-over': dragOver}"
         v-if="dragDrop"
         @dragover.prevent="dragOver = true"
         @dragleave.prevent="dragOver = false"
         @drop="filesDrop">
        Zone de drag and drop
    </div>

    <ul class="m-upload__files-list" v-if="filesList">
        <li v-for="(file, index) of globalFileList"
            class="m-upload__file"
            :class="{'error': file.errorReading}">
            <m-spinner class="m-upload__file__loading"
                       mode="processing"
                       v-if="!file.isRead"></m-spinner>
            <span class="m-upload__file__name">{{ file.file.name }}</span>
            <img :src="file.img"
                 v-if="showImage && file.img"
                 class="m-upload__file__image"
                 :alt="file.file.name" />
            <m-button class="m-upload__file__remove" @click="remove(index)">Remove</m-button>
        </li>
    </ul>

    <m-message class="m-upload__error"
               v-if="errors"
               state="warning"
               :closeButton="true"
               :visible="hasErrorMsgs">
        <ul>
            <li v-for="error in errorMsgs">{{ error }}</li>
        </ul>
    </m-message>
</div>
