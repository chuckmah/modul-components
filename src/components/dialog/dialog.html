<span class="m-dialog">
    <portal v-if="propsIsOpen" :targetEl="'#' + propsId">
        <div class="m-dialog__wrap"
             :class="[{ 'm--is-open': isVisible, 'm--is-primary': propsMode == 'primary', 'm--is-secondary': propsMode == 'secondary', 'm--is-panel': propsMode == 'panel', 'm--is-clickable-backdrop': propsIsCloseOnBackdrop }, className]"
             @click.self="backdropClick"
             ref="dialogWrap">
            <article class="m-dialog__article">
                <button type="button" @click="closeDialog" class="m-dialog__close-button" v-if="propsMode == 'panel'">
                    <m-i18n i18n-key="m-dialog:close"></m-i18n>
                </button>
                <header class="m-dialog__header" :class="{ 'm--has-title': hasTitle }" v-if="hasHeaderSlot || hasTitle || propsMode == 'secondary'">
                    <slot name="header"></slot>
                    <h2 class="m-dialog__header__title" v-if="hasTitle">{{ title }}</h2>
                    <h2 v-if="!hasTitle && !hasHeaderSlot && propsMode == 'secondary'">
                        Error: m-dialog in secondary mode needs a header slot or title prop.
                    </h2>
                    <m-button @click="closeDialog" mode="icon" iconName="default" class="m-dialog__header__close-button" v-if="propsMode == 'secondary'">
                        <m-i18n i18n-key="m-dialog:close"></m-i18n>
                    </m-button>
                </header>
                <div class="m-dialog__body">
                    <slot name="content">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore doloremque odio, et dignissimos qui
                        recusandae doloribus nobis ipsam dolore cupiditate possimus quia commodi sit hic dolorum aperiam.
                        Consectetur quisquam, praesentium.
                    </slot>
                </div>
                <footer class="m-dialog__footer" v-if="hasFooterSlot || propsMode == 'primary'">
                    <slot name="footer"></slot>
                    <nav class="m-dialog__footer-nav" v-if="!hasFooterSlot">
                        <m-button @click="closeDialog" class="m-dialog__footer-nav__first-button">
                            <m-i18n i18n-key="m-dialog:ok"></m-i18n>
                        </m-button>
                        <m-button @click="closeDialog" mode="secondary">
                            <m-i18n i18n-key="m-dialog:cancel"></m-i18n>
                        </m-button>
                    </nav>
                </footer>
            </article>
        </div>
    </portal>
    <span @click="openDialog" class="m-dialog__button" ref="dialogButton" v-if="hasDefaultSlots">
        <slot></slot>
    </span>
    <span v-if="!hasDefaultSlots">
        The default slot is required to open the dialog
    </span>
</span>
